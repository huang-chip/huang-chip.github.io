// 本地知识库
export function useKnowledgeBase() {
  const knowledgeBase = [
    {
      q: /水.*变.*冰|结冰|冰点|冰冻/,
      a: '这是**凝固**（也叫结冰）现象：物质由液态→固态的**物态变化**。\\n水在标准大气压下 **0°C** 开始结冰。过程伴随**放热**（释放凝固潜热），所以冰箱里制冰会把热量带走并排到外面。'
    },
    {
      q: /天空.*蓝|为什么.*蓝/,
      a: '主要因为**瑞利散射**：阳光进入大气层后，短波长（蓝光）被空气分子更强地散射，向各个方向"洒"过来，我们抬头更多看到蓝色。\\n傍晚偏红，是因为光程更长，短波被散掉，长波（红橙）保留下来。'
    },
    {
      q: /火山.*喷发/,
      a: '地幔部分熔融形成**岩浆**，在压力驱动和气体（H₂O、CO₂ 等）膨胀作用下向上移动，若岩浆房压力超过地表承载，就会沿裂隙喷出地表形成喷发。类型有**溢流式**与**爆炸式**等。'
    },
    {
      q: /光合.*作.*用|光合作用/,
      a: '绿色植物、藻类和某些细菌在**叶绿体**中，利用光能把 **CO₂ + H₂O** 转化为**有机物（葡萄糖）**并释放 **O₂**。简式：\\n\\n**6CO₂ + 6H₂O → C₆H₁₂O₆ + 6O₂**（光/叶绿素）\\n\\n它是地球碳循环与氧气来源的根基。'
    }
  ]
  
  function localAnswer(query) {
    for (const item of knowledgeBase) {
      if (item.q.test(query)) {
        return item.a
      }
    }
    return `我来用简单语言解释：**${query}**\\n\\n（演示模式）左侧可接入 API 获得更泛化的回答。`
  }
  
  return { localAnswer }
}

